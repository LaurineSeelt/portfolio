<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Data wrangling | Portfolio Laurine Seelt" />
<meta property="og:type" content="book" />

<meta property="og:description" content="This is the bookdown for my DSFB2 portfolio" />


<meta name="author" content="Laurine Seelt" />

<meta name="date" content="2022-06-11" />


<meta name="description" content="This is the bookdown for my DSFB2 portfolio">

<title>Data wrangling | Portfolio Laurine Seelt</title>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="libs/navigation-1.1/tabsets.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
/* show arrow before summary tag as in bootstrap
TODO: remove if boostrap in updated in html_document (rmarkdown#1485) */
details > summary {
  display: list-item;
  cursor: pointer;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="index.html#introduction">Introduction</a></li>
<li><a href="data-wrangling.html#data-wrangling">Data wrangling</a></li>
<li><a href="reproducing-code.html#reproducing-code">Reproducing code</a></li>
<li><a href="cleaning-up.html#cleaning-up">Cleaning up</a></li>
<li><a href="cv.html#cv">CV</a></li>
<li><a href="free-space.html#free-space">Free space</a></li>
<li><a href="zotero.html#zotero">Zotero</a></li>
<li><a href="github.html#github">GitHub</a></li>
<li><a href="sql.html#sql">SQL</a></li>
<li><a href="package.html#package">Package</a></li>
<li><a href="parameterization.html#parameterization">Parameterization</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="data-wrangling" class="section level1">
<h1>Data wrangling</h1>
<p>To show that I can work with large datasets, in this exercise I will inspect, transform and visualize some of the data from a <em>C. Elegans</em> experiment. In this experiment, <em>C. Elegans</em> were exposed to different concentrations of different compounds. Then, after 68 hours, the researchers looked at how much offspring the <em>C. Elegans</em> gave. The positive control of this study were <em>C. Elegans</em> treated with Ethanol and the negative control of this study were <em>C. Elegans</em> treated with S-medium.
<br></p>
<p><br>
First I looked at the data and read it in in RStudio.
<br></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data-wrangling.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(here(&quot;Data/Data_raw/CE.LIQ.FLOW.062_Tidydata.xlsx&quot;))</span></span>
<span id="cb1-2"><a href="data-wrangling.html#cb1-2" aria-hidden="true" tabindex="-1"></a>Tidydata <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="fu">here</span>(<span class="st">&quot;Data/Data_raw/CE.LIQ.FLOW.062_Tidydata.xlsx&quot;</span>))</span>
<span id="cb1-3"><a href="data-wrangling.html#cb1-3" aria-hidden="true" tabindex="-1"></a>Tidydata <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(Tidydata)</span></code></pre></div>
<p><br>
Next, I looked at the columns RawData, compName and compConcentration to see what type they were because these three columns contain the most important information about this experiment.
<br></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="data-wrangling.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(Tidydata<span class="sc">$</span>RawData)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="data-wrangling.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(Tidydata<span class="sc">$</span>compName)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="data-wrangling.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(Tidydata<span class="sc">$</span>compConcentration)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p><br>
RawData is double, that makes sense because this column contains numbers.
<br>
CompName is a character, that also makes sense. This column contains the names of the compounds that were use.
<br>
CompConcentration is a character, which is kind of weird. This column contains the concentrations of the compounds that were used, so you’d expect this column to be double, beause it contains numbers. I’ll solve this problem later.
<br>
<br>
Then, to get a general overview of the data, I plotted it in a scatter plot.
<br></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="data-wrangling.html#cb8-1" aria-hidden="true" tabindex="-1"></a>Tidydata <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> compConcentration, <span class="at">y =</span> RawData, <span class="at">colour =</span> compName, <span class="at">shape =</span> expType))<span class="sc">+</span></span>
<span id="cb8-2"><a href="data-wrangling.html#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/creating%20a%20scatter%20plot-1.png" width="672" />
<br>
The X-axis isn’t very readable. I think the numbers are organised according to the number that they begin with, not the actual size of them. So 4x10-5 is seen as bigger than 0,1 because 4x10-5 start with a 4. The powers aren’t taken into consideration.
<br>
To make the X-axis more readable, I changed the column compConcentration to numeric and I plotted the Log10 of compConcentration. I also used geom_jitter to create some distance between the datapoints. This makes the graph a bit clearer.
<br></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="data-wrangling.html#cb9-1" aria-hidden="true" tabindex="-1"></a>Tidydata<span class="sc">$</span>compConcentration <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(Tidydata<span class="sc">$</span>compConcentration)</span>
<span id="cb9-2"><a href="data-wrangling.html#cb9-2" aria-hidden="true" tabindex="-1"></a>Tidydata <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> (<span class="fu">log10</span>(compConcentration <span class="sc">+</span> <span class="fl">0.001</span>)), <span class="at">y =</span> RawData, <span class="at">colour =</span> compName, <span class="at">shape =</span> expType)) <span class="sc">+</span></span>
<span id="cb9-3"><a href="data-wrangling.html#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb9-4"><a href="data-wrangling.html#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="fl">0.2</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/correcting%20the%20data%20and%20making%20a%20new%20scatter%20plot-1.png" width="672" />
<br>
<br>
To analyse the effects different compound concentrations have on the number of offspring, I’d make separate datasets for each compound, ordered by concentration. Then you can calculate the mean and standard deviation for each compound and each concentration. You can also perform an ANOVA test on each compound, to see if there is a significant difference in effect between the different concentrations.
So <br>
1. Generate separate datasets with the measurements per compound. <br>
2. Calculate the mean and standard deviation for each concentration of each compound. <br>
3. Perform an ANOVA test for each compound to see if there is a significant difference in effect between the different concentrations.
<br>
To see if the different compounds have different curves/IC50’s, you have to look at the number of offspring per compound. You can make a graph with the concentration of the compound on the X-axis and the number of offspring on the Y-axis. You could possibly plot several compounds in one axle system, to compare them.
<br>
<br>
Lastly, I normalised the data for the negative control and made a scatter plot with this data.
<br></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="data-wrangling.html#cb10-1" aria-hidden="true" tabindex="-1"></a>Tidydata<span class="sc">$</span>compConcentration <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(Tidydata<span class="sc">$</span>compConcentration)</span>
<span id="cb10-2"><a href="data-wrangling.html#cb10-2" aria-hidden="true" tabindex="-1"></a>Tibble_mean <span class="ot">&lt;-</span> Tidydata <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(compName, compConcentration) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">by =</span> <span class="st">&quot;compName&quot;</span>, <span class="at">mean =</span> <span class="fu">mean</span>(RawData, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb10-3"><a href="data-wrangling.html#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Het gemiddelde van de negatieve controle, S-medium, is 85,9. Dat is dus de waarde waar de andere gemiddelden voor genormaliseerd moeten worden.</span></span>
<span id="cb10-4"><a href="data-wrangling.html#cb10-4" aria-hidden="true" tabindex="-1"></a>Tibble_mean <span class="ot">&lt;-</span> Tibble_mean <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mean_norm =</span> mean <span class="sc">/</span> <span class="fl">85.9</span>)</span>
<span id="cb10-5"><a href="data-wrangling.html#cb10-5" aria-hidden="true" tabindex="-1"></a>Tibble_mean <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> (<span class="fu">log10</span>(compConcentration <span class="sc">+</span> <span class="fl">0.001</span>)), <span class="at">y =</span> mean_norm, <span class="at">colour =</span> compName, <span class="at">shape =</span> compName)) <span class="sc">+</span></span>
<span id="cb10-6"><a href="data-wrangling.html#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb10-7"><a href="data-wrangling.html#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb10-8"><a href="data-wrangling.html#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;The effect of different compounds on the amount of offspring&quot;</span>,</span>
<span id="cb10-9"><a href="data-wrangling.html#cb10-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Compound concentration (log10 + 0.001)&quot;</span>,</span>
<span id="cb10-10"><a href="data-wrangling.html#cb10-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Mean offspring, normalised for S-medium&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/normalising%20the%20data%20for%20the%20negative%20control-1.png" width="672" />
<br>
I did this because this way you can see the effect of different compounds and different concentrations more clearly. You can also clearly see the difference in effect between a certain compound concentration and the negative control.</p>

</div>
<p style="text-align: center;">
<a href="index.html"><button class="btn btn-default">Previous</button></a>
<a href="reproducing-code.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
